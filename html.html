<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta http-equiv="Content-Security-Policy" content="
default-src 'self';
object-src 'self' https://mpp.maytronics.com;
font-src 'self' https://fonts.gstatic.com;
frame-src 'self' https://a.tiles.mapbox.com https://docs.google.com/ https://www.mapbox.com;
img-src 'self';
script-src 'self'  https://ajax.googleapis.com 'unsafe-inline' ;
style-src 'self' https://fonts.googleapis.com/ 'unsafe-inline' ;
">

<meta http-equiv="Access-Control-Allow-Origin" content="Origin">
<meta http-equiv="X-XSS-Protection"  content="1;mode=block" always>
<meta http-equiv="X-Content-Type-Options" content="'nosniff' always">

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />


<meta name="referrer" content="no-referrer" />
<meta http-equiv="X-Frame-Options" content="deny">
    <title>Document</title>
  </head>
  <body>
    <h3>The message from the parent appears below:</h3>
    <div id="message">Please send some message from the input above.</div>
<script>
  window.addEventListener('message', function(event) {
    console.log("Message received from the parent: " + event.data); // Message received from parent
  });
</script>
    <input style="margin-top: 1em;" type="text" id="messageText" />
    <button id="sendMessage">Send Message to Parent</button>
    <script>
      var button = document.querySelector("#sendMessage");
      button.addEventListener("click", function () {
        var message = document.querySelector("#messageText").value;
        window.parent.postMessage(message, "*");
      });
	
	function sendMessage(obj){
		window.parent.postMessage(JSON.stringify(obj), "*");
	}

        function handleLoad(){
           
            let doc =  document.getElementById('objTest').contents();

console.log('doc:', doc);
            
            doc.addEventListener('mouseover', e => {
                    e.preventDefault();
                    //e.stopPropagation();
                    //console.log(e.path[1].href.baseVal);
			window.parent.postMessage(e.path[1].href.baseVal, "*");
                    
                });
    
                this.addEventListener('updateGTMdataLayer', function(e) {
                    alert(e.detail);
                window.dataLayer = window.dataLayer || [];
                window.dataLayer.push({                       
                    'event': 'create account',
                    'relevant updates': e.detail
                });
            });
    
                this.dispatchEvent(new CustomEvent("updateGTMdataLayer", { "detail" : "YES"}));
    
        }
    </script>

<div><object id="objTest" onload="handleLoad()" type="image/svg+xml" data="https://mpp.maytronics.com/content/NewSvg/99996610-AR/99996610-AR-00.svg" width="400" height="300"></object> </div>
  </body>
</html>